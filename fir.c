




#include <unistd.h>
#include <stdio.h>
#define Ntap 100 




float fir(float NewSample) {
    float FIRCoef[Ntap] = { 
  0.0013134757925693191,
  0.0009346407514967057,
  0.0009865739619001799,
  0.0007785461496121581,
  0.000246522387908259,
  -0.0006210593180860095,
  -0.0017662391685704273,
  -0.0030557661836650802,
  -0.0042922038711467395,
  -0.005241516897093007,
  -0.005675024721200603,
  -0.005417984452989664,
  -0.004396836023337134,
  -0.0026727889233822575,
  -0.00045328999750573443,
  0.001925505224681652,
  0.004046221088906452,
  0.005481582863152787,
  0.00588145423360702,
  0.005049723274400061,
  0.003016327786575611,
  0.000048279680887917164,
  -0.003357207948501683,
  -0.006550839617356522,
  -0.008842538756109382,
  -0.00963148007587571,
  -0.00854319405078485,
  -0.0055371860304716455,
  -0.0009593075045244501,
  0.004476004864774144,
  0.009776398927234697,
  0.013830472904652542,
  0.015611937670254554,
  0.014395010685278532,
  0.009940118138206978,
  0.002611917774907604,
  -0.0065972375328804045,
  -0.01615462261159936,
  -0.02417870011497452,
  -0.02871737644970827,
  -0.02806128662384084,
  -0.021053710963955283,
  -0.0073323674496216466,
  0.01253536071478085,
  0.03705147963483288,
  0.06393646883741198,
  0.09040469677602195,
  0.1135320573953468,
  0.1306588089016431,
  0.1397662803709583,
  0.1397662803709583,
  0.1306588089016431,
  0.1135320573953468,
  0.09040469677602195,
  0.06393646883741198,
  0.03705147963483288,
  0.01253536071478085,
  -0.0073323674496216466,
  -0.021053710963955283,
  -0.02806128662384084,
  -0.02871737644970827,
  -0.02417870011497452,
  -0.01615462261159936,
  -0.0065972375328804045,
  0.002611917774907604,
  0.009940118138206978,
  0.014395010685278532,
  0.015611937670254554,
  0.013830472904652542,
  0.009776398927234697,
  0.004476004864774144,
  -0.0009593075045244501,
  -0.0055371860304716455,
  -0.00854319405078485,
  -0.00963148007587571,
  -0.008842538756109382,
  -0.006550839617356522,
  -0.003357207948501683,
  0.000048279680887917164,
  0.003016327786575611,
  0.005049723274400061,
  0.00588145423360702,
  0.005481582863152787,
  0.004046221088906452,
  0.001925505224681652,
  -0.00045328999750573443,
  -0.0026727889233822575,
  -0.004396836023337134,
  -0.005417984452989664,
  -0.005675024721200603,
  -0.005241516897093007,
  -0.0042922038711467395,
  -0.0030557661836650802,
  -0.0017662391685704273,
  -0.0006210593180860095,
  0.000246522387908259,
  0.0007785461496121581,
  0.0009865739619001799,
  0.0009346407514967057,
  0.0013134757925693191
    };

    static float x[Ntap]; //input samples
    float y=0;            //output sample
    int n;

    //shift the old samples
    for(n=Ntap-1; n>0; n--)
       x[n] = x[n-1];

    //Calculate the new output
    x[0] = NewSample;
    for(n=0; n<Ntap; n++)
        y += FIRCoef[n] * x[n];
    
    return y;
}



int main( int argc, const char* argv[] )
{
	//printf( "(" );
	
	unsigned char in_samp[10];
	short in_val = 0;
	int out_int = 0;
	float out_val = 0;
	float in_float = 0;
	while (1) {
		read(STDIN_FILENO, in_samp, 2);
		in_val = (in_samp[1] << 8) + in_samp[0];
//		printf("%d ",in_val);
//		printf("%d %d\n",in_samp[1], in_samp[0]);
		in_float = (float) in_val;
		out_val = fir(in_float);
		out_int = (int) out_val;
		//int out_val = (int)fir((float)in_val);
		printf("%c", out_int & 0x00ff);
		printf("%c", (out_int & 0xff00) >> 8);
	}
	//printf( ")\n" );
}


